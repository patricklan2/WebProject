"use strict";(self["webpackChunkmy_cinima"]=self["webpackChunkmy_cinima"]||[]).push([[851],{9658:function(e,t,a){a.d(t,{Z:function(){return d}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"header"},[t("div",{staticClass:"collapse-btn",on:{click:e.collapseChange}},[e.collapse?t("i",{staticClass:"el-icon-s-unfold"}):t("i",{staticClass:"el-icon-s-fold"})]),t("div",{staticClass:"logo"},[e._v("电影院会员管理系统")]),t("div",{staticClass:"header-right"},[e._m(0),t("el-dropdown",{staticClass:"user-name",attrs:{trigger:"click"},on:{command:e.handleCommand}},[t("span",{staticClass:"dropdown-link"},[e._v(e._s(e.id)),t("i",{staticClass:"el-icon-caret-bottom"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{divided:"",command:"loginOut"}},[e._v("退出登录")])],1)],1)],1)])},s=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-avatar"},[t("img",{attrs:{src:a(9017)}})])}],n=(a(7658),a(333)),o={data(){return{collapse:!1,fullscreen:!1,defaultManagerId:"admin"}},computed:{id(){return this.defaultManagerId}},methods:{handleCommand(e){"loginOut"==e&&this.$router.push("/")},collapseChange(){this.collapse=!this.collapse,n.Z.$emit("collapse",this.collapse)},handleCommand(e){"loginOut"==e&&(localStorage.removeItem("managerId"),this.$router.push("/login"))}}},l=o,i=a(1001),c=(0,i.Z)(l,r,s,!1,null,null,null),d=c.exports},9851:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var r=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"header"},[t("div",{staticClass:"MemberLogo"},[e._v("电影院会员系统")]),t("div",{staticClass:"header-right"},[e._m(0),t("el-dropdown",{staticClass:"user-name",attrs:{trigger:"click"},on:{command:e.handleCommand}},[t("span",{staticClass:"dropdown-link"},[e._v(e._s(e.id)),t("i",{staticClass:"el-icon-caret-bottom"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{divided:"",command:"loginOut"}},[e._v("退出登录")])],1)],1)],1)]),t("div",{staticClass:"memberBody"},[t("el-row",{attrs:{gutter:25}},[t("el-col",{attrs:{span:14}},[t("el-row",{staticClass:"mgb20",attrs:{gutter:20}},[t("el-card",{staticStyle:{height:"252px"},attrs:{shadow:"hover"}},[t("div",{staticClass:"user-info"},[t("img",{staticClass:"manager-avatar",attrs:{src:a(9017),alt:""}}),t("div",{staticClass:"user-info-cont"},[t("div",{staticClass:"user-info-name"},[e._v(e._s(e.member.name))])])]),t("div",{staticClass:"user-info-list"},[e._v("会员ID"),t("span",[e._v(e._s(e.member.memberId))])]),t("div",{staticClass:"user-info-list"},[e._v("拥有的积分"),t("span",[e._v(e._s(e.member.integral))])])])],1),t("el-row",{staticClass:"mgb20",attrs:{gutter:20}},[t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("div",{staticStyle:{"font-size":"20px","line-height":"30px"}},[e._v("我的会员卡")])]),t("el-table",{staticClass:"table",attrs:{data:e.cardData,border:""}},[t("el-table-column",{attrs:{prop:"cardId",label:"ID",width:"200",align:"center"}}),t("el-table-column",{attrs:{prop:"grade",label:"等级",align:"center"}}),t("el-table-column",{attrs:{prop:"balance",label:"余额",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("￥"+e._s(t.row.balance))]}}])}),t("el-table-column",{attrs:{prop:"lose",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:0===a.row.lose?"success":"danger"}},[e._v(" "+e._s(0===a.row.lose?"正常":"挂失")+" ")])]}}])}),t("el-table-column",{attrs:{label:"操作",width:"200px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[0===a.row.lose?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleRecharge(a.row)}}},[e._v("充值")]):e._e(),0===a.row.lose?t("el-button",{attrs:{type:"primary",disabled:0==a.row.balance},on:{click:function(t){return e.handleConsume(a.row)}}},[e._v("消费")]):e._e()]}}])})],1)],1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-row",{staticClass:"mgb20",attrs:{gutter:20}},[t("el-card",{staticStyle:{height:"200px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("div",{staticStyle:{"font-size":"20px","line-height":"30px"}},[t("i",{staticClass:"el-icon-user"}),e._v(" 讯息")])]),t("span",[e._v(e._s(e.member.info))])])],1),t("el-row",{staticClass:"mgb20",attrs:{gutter:20}},[t("el-card",{staticStyle:{height:"400px"}},[t("div",{staticStyle:{"font-size":"20px","line-height":"30px"},attrs:{slot:"header"},slot:"header"},[e._v("电影列表")]),t("el-table",{staticClass:"table",attrs:{border:"",data:e.movieData}},[t("el-table-column",{attrs:{prop:"name",label:"电影名"}}),t("el-table-column",{attrs:{prop:"price",label:"价格",width:"55"}}),t("el-table-column",{attrs:{prop:"time",label:"时间"}}),t("el-table-column",{attrs:{prop:"integral",label:"积分",width:"55"}})],1),t("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"total, prev, pager, next","current-page":e.page1.index,"page-size":e.page1.size,total:e.page1.total},on:{"current-change":e.handlePageChange}})],1)],1),t("el-row",{staticClass:"mgb20",attrs:{gutter:20}},[t("el-card",{attrs:{shadow:"hover"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("div",{staticStyle:{"font-size":"20px","line-height":"30px"}},[e._v("商品 "),t("el-button",{attrs:{type:"primary"},on:{click:e.handleExchange}},[e._v("兑换")])],1)]),t("el-table",{staticClass:"table",attrs:{data:e.goodData,border:""}},[t("el-table-column",{attrs:{prop:"name",label:"name",align:"center"}}),t("el-table-column",{attrs:{prop:"integral",label:"积分",align:"center"}}),t("el-table-column",{attrs:{prop:"stock",label:"存量",align:"center"}})],1),t("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"total, prev, pager, next","current-page":e.page2.index,"page-size":e.page2.size,total:e.page2.total},on:{"current-change":e.handlePage2Change}})],1)],1)],1)],1)],1),t("consume-dialog",{ref:"consume"}),t("recharge-dialog",{ref:"recharge"}),t("exchange-dialog",{ref:"exchange"})],1)},s=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-avatar"},[t("img",{attrs:{src:a(9017)}})])}],n=(a(7658),a(8802)),o=a(4307),l=a(555),i=a(9109),c=a(9658),d=a(6639),u=a(5058),m=a(1185),g={components:{Head:c.Z,ExchangeDialog:m.Z,RechargeDialog:u.Z,ConsumeDialog:d.Z},data(){return{member:{name:localStorage.getItem("memberId")},cardData:[],movieData:[],page1:{index:1,size:4,total:0},goodData:[],page2:{index:1,size:4,total:0}}},created(){this.getMemberData(),this.getMovieData(),this.getGoodData()},mounted(){this.$refs.consume.$on("ConsumeDialogConfirm",(e=>{(0,o.F_)(e).then((e=>{200==e.status?(this.$message.success("消费成功"),this.getMemberData()):this.$message.error("消费失败，服务器出现故障")}))})),this.$refs.recharge.$on("RechargeDialogConfirm",(e=>{(0,o.H3)(e).then((e=>{200==e.status?(this.$message.success("充值成功"),this.getMemberData()):this.$message.error("充值失败，服务器出现故障")}))})),this.$refs.exchange.$on("ExchangeDialogConfirm",(e=>{(0,n.Dd)(e).then((e=>{200==e.status?(this.$message.success("兑换成功"),this.getMemberData()):this.$message.success("兑换失败，服务端出现问题")}))}))},methods:{getMemberData(){(0,n.H_)(this.member).then((e=>{this.member=e.data,this.getCardData()}))},getCardData(){(0,n.dF)(this.member).then((e=>{this.cardData=e.data.list}))},handleRecharge(e){this.$refs.recharge.show(e)},handleConsume(e){this.$refs.consume.show(e)},getMovieData(){(0,l.zS)({pageIndex:this.page1.index,pageSize:this.page1.size}).then((e=>{this.movieData=e.data.list,this.page1.total=e.data.pageTotal}))},handlePageChange(e){this.page1.index=e,this.getMovieData()},getGoodData(){(0,i.To)({pageIndex:this.page2.index,pageSize:this.page2.size}).then((e=>{this.goodData=e.data.list,this.page2.total=e.data.pageTotal}))},handlePage2Change(e){this.page2.index=e,this.getGoodData()},handleExchange(){this.$refs.exchange.show(this.member)},handleCommand(e){"loginOut"==e&&(localStorage.removeItem("memberId"),this.$router.push("/login"))}}},h=g,p=a(1001),b=(0,p.Z)(h,r,s,!1,null,null,null),f=b.exports},6639:function(e,t,a){a.d(t,{Z:function(){return d}});var r=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"消费",visible:e.visible,width:"70%"},on:{"update:visible":function(t){e.visible=t}}},[t("el-table",{attrs:{border:"",data:e.movieData},on:{"current-change":e.chooseMovie}},[t("el-table-column",{attrs:{prop:"name",label:"电影名"}}),t("el-table-column",{attrs:{prop:"price",label:"价格"}}),t("el-table-column",{attrs:{prop:"integral",label:"积分"}})],1),t("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"total, prev, pager, next","current-page":e.page.index,"page-size":e.page.size,total:e.page.total},on:{"current-change":e.handlePageChange}}),t("el-form",{attrs:{model:e.form,"label-width":"70px",size:"mini"}},[t("el-form-item",{attrs:{label:"电影名字"}},[e._v(" "+e._s(e.consume.name)+" ")]),t("el-form-item",{attrs:{label:"数量"}},[t("el-input",{on:{change:e.inputNumber},model:{value:e.consume.number,callback:function(t){e.$set(e.consume,"number",t)},expression:"consume.number"}})],1),t("el-form-item",{attrs:{label:"价格"}},[e._v(" "+e._s(e.consume.totalPrice)+" ")]),t("el-form-item",{attrs:{label:"获得积分"}},[e._v(" "+e._s(e.consume.totalIntegral)+" ")])],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)},s=[],n=a(555),o={data(){return{visible:!1,cardInfo:{},movieData:[],page:{index:1,size:4,total:0},consume:{cardId:"",name:"",totalPrice:0,totalIntegral:0,number:0}}},created(){this.getMovieData()},methods:{confirm(){this.visible=!1,this.$emit("ConsumeDialogConfirm",this.consume)},show(e){this.cardInfo=e,this.consume.cardId=e.cardId,this.visible=!0},getMovieData(){(0,n.zS)({pageIndex:this.page.index,pageSize:this.page.size}).then((e=>{this.movieData=e.data.list,this.page.total=e.data.pageTotal}))},handlePageChange(e){this.page.index=e,this.getMovieData()},chooseMovie(e){let t=e;this.consume.name=t.name,0===this.consume.number&&(this.consume.number=1),this.consume.totalPrice=t.price*this.consume.number,this.consume.totalIntegral=t.integral*this.consume.number},inputNumber(){this.consume.totalPrice=movie.price*this.consume.number,this.consume.totalIntegral=movie.integral*this.consume.number}}},l=o,i=a(1001),c=(0,i.Z)(l,r,s,!1,null,null,null),d=c.exports},5058:function(e,t,a){a.d(t,{Z:function(){return c}});var r=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"消费",visible:e.visible,width:"70%"},on:{"update:visible":function(t){e.visible=t}}},[t("el-form",{attrs:{model:e.form,"label-width":"70px",size:"mini"}},[t("el-form-item",{attrs:{label:"cardId"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.recharge.cardId,callback:function(t){e.$set(e.recharge,"cardId",t)},expression:"recharge.cardId"}})],1),t("el-form-item",{attrs:{label:"额度"}},[t("el-input",{model:{value:e.recharge.number,callback:function(t){e.$set(e.recharge,"number",t)},expression:"recharge.number"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)},s=[],n={data(){return{visible:!1,cardInfo:{},recharge:{cardId:"",number:0}}},methods:{confirm(){this.visible=!1,this.$emit("RechargeDialogConfirm",this.recharge)},show(e){this.cardInfo=e,this.recharge.cardId=e.cardId,this.visible=!0}}},o=n,l=a(1001),i=(0,l.Z)(o,r,s,!1,null,null,null),c=i.exports},1185:function(e,t,a){a.d(t,{Z:function(){return d}});var r=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"消费",visible:e.visible,width:"70%"},on:{"update:visible":function(t){e.visible=t}}},[t("el-table",{attrs:{border:"",data:e.goodData},on:{"current-change":e.chooseGood}},[t("el-table-column",{attrs:{prop:"name",label:"商品名"}}),t("el-table-column",{attrs:{prop:"stock",label:"剩余"}}),t("el-table-column",{attrs:{prop:"integral",label:"积分"}})],1),t("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"total, prev, pager, next","current-page":e.page.index,"page-size":e.page.size,total:e.page.total},on:{"current-change":e.handlePageChange}}),t("el-form",{attrs:{"label-width":"70px",size:"mini"}},[t("el-form-item",{attrs:{label:"商品名"}},[e._v(" "+e._s(e.exchange.name)+" ")]),t("el-form-item",{attrs:{label:"数量"}},[t("el-input",{on:{change:e.inputNumber},model:{value:e.exchange.number,callback:function(t){e.$set(e.exchange,"number",t)},expression:"exchange.number"}})],1),t("el-form-item",{attrs:{label:"总积分"}},[e._v(" "+e._s(e.exchange.totalIntegral)+" ")])],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)},s=[],n=a(9109),o={data(){return{visible:!1,memberInfo:{},goodData:[],page:{index:1,size:4,total:0},exchange:{memberId:"",name:"",totalIntegral:0,number:0}}},created(){this.getGoodData()},methods:{confirm(){this.visible=!1,this.$emit("ExchangeDialogConfirm",this.exchange)},show(e){this.memberInfo=e,this.exchange.memberId=e.memberId,this.visible=!0},getGoodData(){(0,n.To)({pageIndex:this.page.index,pageSize:this.page.size}).then((e=>{this.goodData=e.data.list,this.page.total=e.data.pageTotal}))},handlePageChange(e){this.page.index=e,this.getGoodData()},chooseGood(e){let t=e;this.exchange.name=t.name,0===this.exchange.number&&(this.exchange.number=1),this.exchange.totalIntegral=t.integral*this.exchange.number}}},l=o,i=a(1001),c=(0,i.Z)(l,r,s,!1,null,null,null),d=c.exports},4307:function(e,t,a){a.d(t,{AN:function(){return n},F_:function(){return u},H3:function(){return d},L5:function(){return l},NN:function(){return c},TA:function(){return i},U$:function(){return o},sz:function(){return s}});var r=a(1117);const s=e=>(0,r.Z)({url:"selectAllCard",method:"post",params:e}),n=e=>(0,r.Z)({url:"selectCardByCondition",method:"post",params:e}),o=e=>(0,r.Z)({url:"selectAllConsumeRecord",method:"post",params:e}),l=e=>(0,r.Z)({url:"selectAllExchangeRecord",method:"post",params:e}),i=e=>(0,r.Z)({url:"cardLose",method:"post",params:e}),c=e=>(0,r.Z)({url:"cardCancel",method:"post",params:e}),d=e=>(0,r.Z)({url:"recharge",method:"post",params:e}),u=e=>(0,r.Z)({url:"consume",method:"post",params:e})},555:function(e,t,a){a.d(t,{DG:function(){return l},LZ:function(){return c},_m:function(){return o},dO:function(){return i},fx:function(){return d},g2:function(){return s},zS:function(){return n}});var r=a(1117);const s=e=>(0,r.Z)({url:"selectManagerByManagerId",method:"get",params:e}),n=e=>(0,r.Z)({url:"selectAllMovie",method:"get",params:e}),o=e=>(0,r.Z)({url:"getDealData",method:"get",params:e}),l=e=>(0,r.Z)({url:"getStatisticData",method:"get",params:e}),i=e=>(0,r.Z)({url:"addMovie",method:"get",params:e}),c=e=>(0,r.Z)({url:"modifyMovie",method:"get",params:e}),d=e=>(0,r.Z)({url:"deleteMovie",method:"get",params:e})},9109:function(e,t,a){a.d(t,{To:function(){return s},aH:function(){return l},bT:function(){return n},or:function(){return o}});var r=a(1117);const s=e=>(0,r.Z)({url:"selectAllGood",method:"get",params:e}),n=e=>(0,r.Z)({url:"addGood",method:"post",params:e}),o=e=>(0,r.Z)({url:"modifyGood",method:"post",params:e}),l=e=>(0,r.Z)({url:"deleteGood",method:"post",params:e})},8802:function(e,t,a){a.d(t,{Dd:function(){return i},EP:function(){return l},Gh:function(){return s},H_:function(){return d},Rf:function(){return o},dF:function(){return u},hs:function(){return n},tb:function(){return c}});var r=a(1117);const s=e=>(0,r.Z)({url:"selectAllMember",method:"get",params:e}),n=e=>(0,r.Z)({url:"registerMember",method:"post",params:e}),o=e=>(0,r.Z)({url:"modifyMember",method:"get",params:e}),l=e=>(0,r.Z)({url:"deleteMember",method:"get",params:e}),i=e=>(0,r.Z)({url:"exchange",method:"get",params:e}),c=e=>(0,r.Z)({url:"selectMemberByCondition",method:"get",params:e}),d=e=>(0,r.Z)({url:"getMemberAllInfo",method:"get",params:e}),u=e=>(0,r.Z)({url:"selectCardByMemberId",method:"get",params:e})},333:function(e,t,a){var r=a(144);const s=new r["default"];t.Z=s},9017:function(e,t,a){e.exports=a.p+"img/admin.22222124.png"}}]);
//# sourceMappingURL=851.afb5f984.js.map